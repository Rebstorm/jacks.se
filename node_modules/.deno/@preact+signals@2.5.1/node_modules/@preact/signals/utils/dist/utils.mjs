import{useSignal}from"@preact/signals";import{createElement as n,Fragment as t}from"preact";import{useMemo as r}from"preact/hooks";const e=n=>"function"==typeof n.children?n.children(n.v,n.i):n.children;function o(t){const r="function"==typeof t.when?t.when():t.when.value;if(!r)return t.fallback||null;else return n(e,{v:r,children:t.children})}function c(o){const c=r(()=>new Map,[]);let i=("function"==typeof o.each?o.each():o.each).value;if(!i.length)return o.fallback||null;const u=new Set(c.keys()),f=i.map((t,r)=>{u.delete(t);if(!c.has(t)){const i=n(e,{v:t,i:r,children:o.children});c.set(t,i);return i}return c.get(t)});u.forEach(n=>{c.delete(n)});return n(t,null,f)}function i(n){const t=useSignal(n);if(t.peek()!==n)t.value=n;return t}function u(n){const t=useSignal(n);if(!("current"in t))Object.defineProperty(t,"current",f);return t}const f={configurable:!0,get(){return this.value},set(n){this.value=n}};export{c as For,o as Show,i as useLiveSignal,u as useSignalRef};//# sourceMappingURL=utils.mjs.map
